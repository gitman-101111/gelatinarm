<?xml version="1.0" encoding="utf-8"?>

<!--
    This file contains Runtime Directives used by .NET Native. The defaults here are suitable for most
    developers. However, you can modify these parameters to modify the behavior of the .NET Native
    optimizer.

    Runtime Directives are documented at https://go.microsoft.com/fwlink/?LinkID=391919

    To fully enable reflection for App1.MyClass and all of its public/private members
    <Type Name="App1.MyClass" Dynamic="Required All"/>

    To enable dynamic creation of the specific instantiation of AppClass<T> over System.Int32
    <TypeInstantiation Name="App1.AppClass" Arguments="System.Int32" Activate="Required Public" />

    Using the Namespace directive to apply reflection policy to all the types in a particular namespace
    <Namespace Name="DataClasses.ViewModels" Serialize="All" />
-->

<Directives xmlns="http://schemas.microsoft.com/netfx/2013/01/metadata">
    <Application>
        <!--
      An Assembly element with Name="*Application*" applies to all assemblies in
      the application package. The asterisks are not wildcards.
    -->
        <Assembly Name="*Application*" Dynamic="Required All" />

        <!-- Add your application specific runtime directives here. -->
        <Assembly Name="Jellyfin.Sdk" Dynamic="Required All" />
        <Assembly Name="Microsoft.Extensions.DependencyInjection" Dynamic="Required All" />
        <Assembly Name="Microsoft.Extensions.Logging" Dynamic="Required All" />
        <Assembly Name="System.Text.Json" Dynamic="Required All" />
        <Assembly Name="CommunityToolkit.Mvvm" Dynamic="Required All" />
        <Assembly Name="Microsoft.Extensions.Http" Dynamic="Required All" />
        <Assembly Name="System.Net.Http" Dynamic="Required All" />

        <!-- Ensure XAML types are preserved -->
        <Namespace Name="Windows.UI.Xaml" Dynamic="Required All" />
        <Namespace Name="Windows.UI.Xaml.Controls" Dynamic="Required All" />
        <Namespace Name="Windows.UI.Xaml.Media" Dynamic="Required All" />
        <Namespace Name="Windows.UI.Xaml.Media.Animation" Dynamic="Required All" />
        <Namespace Name="Windows.UI" Dynamic="Required All" />

        <!-- Preserve Jellyfin SDK types -->
        <Namespace Name="Jellyfin.Sdk.Generated.Models" Dynamic="Required All" />
        <Namespace Name="Jellyfin.Sdk.Generated" Dynamic="Required All" />
        <Namespace Name="Gelatinarm.ViewModels" Dynamic="Required All" />
        <Namespace Name="Gelatinarm.Services" Dynamic="Required All" />
        <Namespace Name="Gelatinarm.Models" Dynamic="Required All" />
        <Namespace Name="Gelatinarm.Helpers" Dynamic="Required All" />
        
        <!-- JSON Serialization -->
        <Namespace Name="System.Text.Json.Serialization" Dynamic="Required All" />
        <Namespace Name="System.Text.Json.Nodes" Dynamic="Required All" />
        
        <!-- HTTP and Networking -->
        <Namespace Name="System.Net.Http" Dynamic="Required All" />
        <Namespace Name="System.Net.Http.Headers" Dynamic="Required All" />
        <Namespace Name="Microsoft.Extensions.Http" Dynamic="Required All" />

        <!-- Application Namespaces -->
        <Namespace Name="Gelatinarm" Dynamic="Required All" />
        <Namespace Name="Gelatinarm.Controls" Dynamic="Required All" />

        <!-- System and Runtime -->
        <Namespace Name="System.ComponentModel" Dynamic="Required Public" />
        <Namespace Name="System.Runtime.CompilerServices" Dynamic="Required Public" />
        <Namespace Name="System.Collections.ObjectModel" Dynamic="Required Public" />

        <!-- Windows UI -->
        <Namespace Name="Windows.UI.Xaml.Media.Imaging" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Xaml.Controls.Primitives" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Xaml.Navigation" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Xaml.Data" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Core" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Text" Dynamic="Required Public" />
        <Namespace Name="Windows.UI.Popups" Dynamic="Required Public" />

        <!-- Windows Application Model -->
        <Namespace Name="Windows.ApplicationModel" Dynamic="Required Public" />
        <Namespace Name="Windows.ApplicationModel.Activation" Dynamic="Required Public" />
        <Namespace Name="Windows.Storage" Dynamic="Required Public" />
        <Namespace Name="Windows.Networking.Connectivity" Dynamic="Required Public" />

        <!-- Microsoft UI and DI -->
        <Namespace Name="Microsoft.UI.Xaml.Controls" Dynamic="Required Public" />

        <!-- Types that need full reflection -->
        <!-- ViewModels -->
        <Type Name="Gelatinarm.ViewModels.BaseViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.MainViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.SettingsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.FavoritesViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.LibraryViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.LibrarySelectionViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.MediaPlayerViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.LoginViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.ServerSelectionViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.AlbumDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.ArtistDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.CollectionDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.MovieDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.NetworkSettingsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.PersonDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.PlaybackSettingsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.QuickConnectInstructionsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.SeasonDetailsViewModel" Dynamic="Required All" />
        <Type Name="Gelatinarm.ViewModels.ServerSettingsViewModel" Dynamic="Required All" />

        <!-- Service Interfaces -->
        <Type Name="Gelatinarm.Services.IAuthenticationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ICacheManagerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ICacheProvider" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IDeviceProfileService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IDialogService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IEpisodeQueueService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IErrorHandlingService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IImageLoadingService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaControllerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaControlService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaDiscoveryService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaNavigationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaOptimizationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaPlaybackService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMediaSessionService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMemoryMonitor" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IMusicPlayerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.INavigationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.INavigationStateService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.INetworkMonitor" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IPlaybackControlService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IPlaybackQueueService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IPlaybackStatisticsService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IPreferencesService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ISkipSegmentService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ISubtitleService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ISystemMediaIntegrationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ISystemMonitorService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IUnifiedDeviceService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IUserDataService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.IUserProfileService" Dynamic="Required All" />

        <!-- Service Implementations -->
        <Type Name="Gelatinarm.Services.AuthenticationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.UnifiedDeviceService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.PreferencesService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaPlaybackService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.NavigationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.UserProfileService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaDiscoveryService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.SystemMonitorService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.UserDataService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ErrorHandlingService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaControlService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.ImageLoadingService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.CacheManagerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.DeviceProfileService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.DialogService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.EpisodeQueueService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaControllerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaNavigationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MediaOptimizationService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.MusicPlayerService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.PlaybackControlService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.PlaybackQueueService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.PlaybackStatisticsService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.SkipSegmentService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.SubtitleService" Dynamic="Required All" />
        <Type Name="Gelatinarm.Services.SystemMediaIntegrationService" Dynamic="Required All" />

        <!-- Base Classes -->
        <Type Name="Gelatinarm.Services.BaseService" Dynamic="Required All" />
        
        <!-- Additional critical types for .NET Native -->
        <!-- Async/Await and Threading -->
        <Namespace Name="System.Threading" Dynamic="Required All" />
        <Namespace Name="System.Threading.Tasks" Dynamic="Required All" />
        
        <!-- Collections -->
        <Namespace Name="System.Collections.Generic" Dynamic="Required All" />
        <Namespace Name="System.Collections.Concurrent" Dynamic="Required All" />
        
        <!-- LINQ -->
        <Namespace Name="System.Linq" Dynamic="Required All" />
        
        <!-- Media Playback -->
        <Namespace Name="Windows.Media" Dynamic="Required All" />
        <Namespace Name="Windows.Media.Core" Dynamic="Required All" />
        <Namespace Name="Windows.Media.Playback" Dynamic="Required All" />
        <Namespace Name="Windows.Media.Streaming.Adaptive" Dynamic="Required All" />
        
    </Application>
</Directives>
