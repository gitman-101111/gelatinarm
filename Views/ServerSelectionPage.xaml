<?xml version="1.0" encoding="utf-8"?>

<views:BasePage
    x:Class="Gelatinarm.Views.ServerSelectionPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:views="using:Gelatinarm.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <!-- Main content -->
        <StackPanel HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    MaxWidth="400">

            <!-- Header -->
            <Image Source="ms-appx:///Assets/StoreLogo.scale-400.png" Width="150" Height="150" />
            <TextBlock Text="Welcome"
                       Style="{StaticResource HeaderTextStyle}"
                       HorizontalAlignment="Center"
                       Margin="{StaticResource CompactControlMargin}"
                       Foreground="White" />
            <TextBlock Text="Connect to your Jellyfin server to get started"
                       Style="{StaticResource SubheaderTextStyle}"
                       HorizontalAlignment="Center"
                       Margin="{StaticResource HeaderMargin}"
                       Foreground="#CCFFFFFF" />

            <!-- InputScope, IsSpellCheckEnabled, IsTextPredictionEnabled removed for Xbox compatibility -->
            <!-- AcceptsReturn removed for Xbox compatibility -->
            <StackPanel Width="320">
                <!-- <TextBlock Text="Server URL"
                          FontSize="15"
                          Margin="{StaticResource StandardControlMargin}"
                          Foreground="White"/> -->
                <TextBox x:Name="ServerUrlTextBox"
                         Text="{x:Bind ViewModel.ServerUrl, Mode=TwoWay}"
                         PlaceholderText="http://server:8096"
                         Margin="{StaticResource HeaderMargin}"
                         IsTabStop="True"
                         TabIndex="1"
                         InputScope="Url"
                         Foreground="White"
                         Background="#2A2A2A"
                         BorderBrush="#555555"
                         PlaceholderForeground="#999999" />
            </StackPanel>

            <!-- SSL Certificate Options -->
            <StackPanel HorizontalAlignment="Center">
                <TextBlock Text="Allow Untrusted Certificates (Ignores Errors)"
                           FontSize="15"
                           Margin="{StaticResource StandardControlMargin}"
                           Foreground="White" />
                <ToggleSwitch IsOn="{x:Bind ViewModel.AllowUntrustedCertificates, Mode=TwoWay}"
                              IsTabStop="True"
                              TabIndex="2"
                              Margin="{StaticResource CompactControlMargin}" />
            </StackPanel>

            <Button Content="Connect"
                    Command="{x:Bind ViewModel.ConnectCommand}"
                    Style="{StaticResource AccentButtonStyle}"
                    HorizontalAlignment="Stretch"
                    MinHeight="40"
                    Margin="{StaticResource StandardControlMargin}"
                    IsTabStop="True"
                    TabIndex="3" />

        </StackPanel>

        <!-- Loading overlay -->
        <Grid Background="#80000000"
              Visibility="{x:Bind ViewModel.IsLoadingOverlayVisible, Mode=OneWay}"
              Opacity="0.9">
            <StackPanel HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                <ProgressRing IsActive="{x:Bind ViewModel.IsLoadingRingActive, Mode=OneWay}"
                              Width="60"
                              Height="60" />
                <TextBlock Text="{x:Bind ViewModel.LoadingText, Mode=OneWay}"
                           Style="{StaticResource SubheaderTextStyle}"
                           HorizontalAlignment="Center"
                           Margin="{StaticResource HeaderMargin}"
                           Foreground="White" />
            </StackPanel>
        </Grid>
    </Grid>
</views:BasePage>
